<!doctype html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link href="main.css" rel="stylesheet">
    <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi"
            crossorigin="anonymous"
    />
</head>
<body>
<div class="container">
    <div th:replace="~{ nav.html::navbar }"></div>
    <h4 class="ml-2 my-3 text-center">채팅창 등록하기</h4>

    <div class="container mt-3">
        <form action="/add-write" method="post">
            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
            <div class="form-group">
                <label>출발지</label>
                <input type="text" class="form-control" id="startPoint" name="startPoint" readonly />
                <button type="button" class="btn btn-outline-secondary" onclick="searchAddress('startPoint')">검색</button>
            </div>
            <div class="form-group">
                <label>도착지</label>
                <input type="text" class="form-control" id="endPoint" name="endPoint" readonly />
                <button type="button" class="btn btn-outline-secondary" onclick="searchAddress('endPoint')">검색</button>
            </div>

            <div class="form-group">
                <label>날짜</label>
                <input type="date" class="form-control" name="date" />
            </div>
            <div class="form-group">
                <label>시간</label>
                <input type="time" class="form-control" name="time" />
            </div>
            <div class="form-group">
                <label>모집인원</label>
                <input type="number" min="2" max="4" class="form-control" name="personnel" />
            </div>
            <br />
            <button type="submit" class="btn btn-danger">등록</button>
        </form>
    </div>
</div>

<script
        src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3"
        crossorigin="anonymous">
</script>
<script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
<script>
    function searchAddress(inputId) {
    new daum.Postcode({
        oncomplete: function(data) {
            var fullAddress = ''; // 전체 주소
            var extraAddress = ''; // 추가 주소

            if(data.userSelectedType === 'R'){ // 사용자가 도로명 주소를 선택했을 경우
                fullAddress = data.roadAddress; // 도로명 주소
            } else { // 사용자가 지번 주소를 선택했을 경우
                fullAddress = data.jibunAddress; // 지번 주소
            }

            if(data.userSelectedType === 'R'){
                // 건물명이 있고, 공동주택일 경우 추가 정보를 포함시킨다
                if(data.buildingName && data.apartment === 'Y'){
                    extraAddress += (extraAddress !== '' ? ', ' + data.buildingName : data.buildingName);
                }
                fullAddress += (extraAddress !== '' ? ' ('+ extraAddress +')' : '');
            }

            document.getElementById(inputId).value = fullAddress; // 입력 필드에 주소를 표시
        }
    }).open();
}

</script>


</body>
</html>